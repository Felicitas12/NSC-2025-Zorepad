#version 450 core
layout(quads,fractional_odd_spacing,cw)in;layout(binding=0)uniform sampler2D heightMap;layout(std140, binding = 6)uniform Matrices{mat4 projection;mat4 view;};uniform mat4 model;in vec2 TexCoord_TE[];out vec3 WorldPos;out vec2 TexCoords;void main(){float m=gl_TessCoord.x,T=gl_TessCoord.y;vec2 g=mix(mix(TexCoord_TE[0],TexCoord_TE[1],m),mix(TexCoord_TE[2],TexCoord_TE[3],m),T);vec4 v=gl_in[0].gl_Position,n=gl_in[1].gl_Position,s=gl_in[2].gl_Position,c=gl_in[3].gl_Position;v=mix(mix(v,n,m),mix(s,c,m),T);v.y+=texture(heightMap,g).x*150.;WorldPos=vec3(model*v);gl_Position=projection*view*model*v;TexCoords=g;}