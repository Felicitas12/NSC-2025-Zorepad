#version 450 core
layout(vertices=4)out;uniform mat4 lightSpaceMatrix,model;in vec2 TexCoord_TC[];out vec2 TexCoord_TE[];void main(){gl_out[gl_InvocationID].gl_Position=gl_in[gl_InvocationID].gl_Position;TexCoord_TE[gl_InvocationID]=TexCoord_TC[gl_InvocationID];if(gl_InvocationID==0){vec4 l=lightSpaceMatrix*model*gl_in[0].gl_Position,m=lightSpaceMatrix*model*gl_in[1].gl_Position,g=lightSpaceMatrix*model*gl_in[2].gl_Position,D=lightSpaceMatrix*model*gl_in[3].gl_Position;float n=clamp((length(l.xyz)-20)/980,0.,1.),c=clamp((length(m.xyz)-20)/980,0.,1.),z=clamp((length(g.xyz)-20)/980,0.,1.),s=clamp((length(D.xyz)-20)/980,0.,1.),T=mix(32,4,min(z,n)),t=mix(32,4,min(n,c));c=mix(32,4,min(c,s));n=mix(32,4,min(s,z));gl_TessLevelOuter[0]=T;gl_TessLevelOuter[1]=t;gl_TessLevelOuter[2]=c;gl_TessLevelOuter[3]=n;gl_TessLevelInner[0]=max(t,n);gl_TessLevelInner[1]=max(T,c);}}